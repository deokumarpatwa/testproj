<mvc:View
    controllerName="com.intapptics.mdbulkload.controller.BulkLoad"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:u="sap.ui.unified"
    xmlns:table="sap.ui.table"
    xmlns:core="sap.ui.core"
    displayBlock="true"
    xmlns="sap.m"
>
    <Page
        id="page"
        title="{i18n>title}"
    >
        <content>
            <f:Form
                id="formUpload"
                editable="true"
            >
                <f:layout>
                    <f:ResponsiveGridLayout
                        id="rglayoutid"
                        labelSpanXL="4"
                        labelSpanL="4"
                        labelSpanM="4"
                        labelSpanS="12"
                        adjustLabelSpan="false"
                        emptySpanXL="0"
                        emptySpanL="0"
                        emptySpanM="0"
                        emptySpanS="0"
                        columnsXL="3"
                        columnsL="2"
                        columnsM="2"
                        singleContainerFullSize="false"
                    />
                </f:layout>
                <f:formContainers>
                    <f:FormContainer id="top_formcontainer">
                        <f:formElements>
                            <f:FormElement
                                id="fe_categorylist"
                                label="{i18n>lblCategory}"
                            >
                                <f:fields>
                                    <ComboBox
                                        id="combo_category"
                                        items="{oUniqueCategoryModel>/}"
                                        selectionChange="categoryChange"
                                    >
                                        <core:Item
                                            id="item_category"
                                            key="{oUniqueCategoryModel>categoryName}"
                                            text="{oUniqueCategoryModel>categoryName}"
                                        />
                                    </ComboBox>
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement
                                id="fe_tablelist"
                                label="{i18n>lblTableList}"
                            >
                                <f:fields>
                                    <ComboBox
                                        id="combo_tablelist"
                                        items="{oUniqueTableModel>/}"
                                        selectionChange="selectedTable"
                                        showSecondaryValues="true"
                                    >
                                        <core:ListItem
                                            id="item_tablelist"
                                            key="{oUniqueTableModel>Key}"
                                            text="{oUniqueTableModel>TableName}"
                                            additionalText="{oUniqueTableModel>Description}"
                                        />
                                    </ComboBox>
                                    <Button
                                        id="btn_Download"
                                        text="{i18n>btnDownloadTemplate}"
                                        type="Emphasized"
                                        width="100%"
                                        icon="sap-icon://excel-attachment"
                                        visible="false"
                                        press=".onTemplateDownload"
                                    />
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement
                                id="form_upload"
                                label="{i18n>lblFile}"
                            >
                                <f:fields>
                                    <u:FileUploader
                                        id="fu_upload"
                                        placeholder="{i18n>lblFile}"
                                        name="myFileUpload"
                                        uploadComplete="handleUploadComplete"
                                        change="onFileUpload"
                                        style="Emphasized"
                                        fileType="XLSX, xlsx"
                                        width="100%"
                                        icon="sap-icon://open-folder"
                                        tooltip="Upload the file"
                                        uploadOnChange="true"
                                    />
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement id="form_button">
                                <f:fields>
                                    <Button
                                        id="btn_validate"
                                        text="Validate Data"
                                        icon="sap-icon://validate"
                                        type="Emphasized"
                                        press="handleValidateData"
                                        class="sapUiSmallMarginEnd"
                                    />
                                    <Button
                                        id="btn_reload"
                                        text="Reload"
                                        icon="sap-icon://refresh"
                                        type="Emphasized"
                                        press="handleReloadPress"
                                    />
                                </f:fields>
                            </f:FormElement>
                        </f:formElements>
                    </f:FormContainer>
                    <f:FormContainer id="end_formcontainer">
                        <f:formElements>
                            <f:FormElement id="fe_overwritenull">
                                <f:fields>
                                    <CheckBox
                                        id="cb_overwritenull"
                                        text="Overwrite with Null"
                                        select="checkOverwriteNull"
                                    />
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement id="fe_workflow">
                                <f:fields>
                                    <CheckBox
                                        id="cb_workflow"
                                        select="checkWorkflow"
                                    />
                                    <Input
                                        id="inp_workflow"
                                        enabled="false"
                                        maxLength="10"
                                        required="true"
                                    />
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement id="fe_updatezonly">
                                <f:fields>
                                    <CheckBox
                                        id="cb_updatezonly"
                                        text="Update Z Table Only"
                                        select="checkUpdateZOnly"
                                    />
                                </f:fields>
                            </f:FormElement>
                        </f:formElements>
                    </f:FormContainer>
                </f:formContainers>
            </f:Form>
            <ScrollContainer
                id="sc_table"
                height="40%"
                width="96%"
                vertical="true"
                class="sapUiMediumMarginEnd"
            >
                <Table
                    id="table_validresult"
                    items="{oHeaderDataModel>/}"
                    contextualWidth="Auto"
                    showSeparators="All"
                >
                    <headerToolbar>
                        <Toolbar id="tb_header">
                            <Title
                                id="title_header"
                                text="Validation Result"
                            />
                            <ToolbarSpacer id="tbs_invalidexcel" />
                            <Button
                                id="btn_downloadinvaliddata"
                                text="Download Invalid Records"
                                type="Emphasized"
                                press="onInvalidDataExport"
                                icon="sap-icon://excel-attachment"
                            />
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column
                            id="col_validcount"
                            hAlign="Center"
                        >
                            <Text
                                id="txt_validcount"
                                text="Valid Count"
                            />
                        </Column>
                        <Column
                            id="col_invalidcount"
                            hAlign="Center"
                        >
                            <Text
                                id="txt_invalidcount"
                                text="Invalid Count"
                            />
                        </Column>
                        <Column
                            id="col_markupdate"
                            hAlign="Center"
                        >
                            <Text
                                id="txt_markupdate"
                                text="Marked for Updation"
                            />
                        </Column>
                        <Column
                            id="col_markcreate"
                            hAlign="Center"
                        >
                            <Text
                                id="txt_markcreate"
                                text="Marked for Creation"
                            />
                        </Column>
                        <Column
                            id="col_totalrecord"
                            hAlign="Center"
                        >
                            <Text
                                id="txt_totalrecord"
                                text="Total Number of Records"
                            />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem id="cli_validresult">
                            <cells>
                                <Text
                                    id="cell_validcount"
                                    text="{oHeaderDataModel>Validcount}"
                                    class="valid"
                                />
                                <Text
                                    id="cell_invalidcount"
                                    text="{oHeaderDataModel>Invalidcount}"
                                    class="invalid"
                                />
                                <Text
                                    id="cell_markupdate"
                                    text="{oHeaderDataModel>Updatecount}"
                                />
                                <Text
                                    id="cell_markcreate"
                                    text="{oHeaderDataModel>Createcount}"
                                />
                                <Text
                                    id="cell_totalcount"
                                    text="{oHeaderDataModel>TotalCount}"
                                />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
                <Label
                    id="lbl_warning"
                    text="Click on Submit to continue with valid records"
                    class="sapUiNoMarginTop"
                />
            </ScrollContainer>
        </content>
        <footer>
            <Toolbar id="tb_footer">
                <ToolbarSpacer id="tbs_footer" />
                <Button
                    id="btn_submit"
                    type="Emphasized"
                    icon="sap-icon://sys-enter"
                    text="Submit"
                    press="onSubmitDialog"
                />
                <Button
                    id="btn_cancel"
                    type="Emphasized"
                    icon="sap-icon://sys-cancel"
                    text="Cancel"
                    press="onCancel"
                />
            </Toolbar>
        </footer>
    </Page>
</mvc:View>